<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h3>Motion 인식</h3>
    <img id="video" src="">

    <script>
        var w = 320, h = 240;
        var url = "ws://localhost:8000/motion"
        var ws = new WebSocket(url);
        ws.binaryType = "arraybuffer";
        ws.onopen = function(){
            console.log("Web Socket is connected.");
        }
        ws.onmessage = function(msg){
            console.log(msg.data);
            var arrayBufferView = new Uint8Array( msg.data);
            var blob = new Blob( [ arrayBufferView ], { type: "multipart/x-mixed-replace" } );
            var urlCreator = window.URL || window.webkitURL;
            var imageUrl = urlCreator.createObjectURL( blob );
            var img = document.querySelector( "#video" );
            img.src = imageUrl;
        }
        ws.onclose = function(){
            console.log("connection close");
        }
    </script>
</body>
</html>
