# CHUKKA (ì¶¤ì„ ë°°ìš°ê³  ì¦ê¸°ê³  ì†Œí†µí•  ìˆ˜ ìˆëŠ” ì¶¤ í”Œë«í¼)

ğŸ“† **í”„ë¡œì íŠ¸ ì§„í–‰ê¸°ê°„ : 2022/07/18 ~ 2022/08/19**

ğŸ¤  **FE: ìœ¤í˜¸ì¤€, í™ì„±ëª©**

ğŸ˜¼ **BE: ê¹€ìˆ˜ì§„(íŒ€ì¥), ê¹€ëŒ€ì˜, ì´ì—°ì˜, ìµœì§€ì›**

ğŸ“½ **[í”„ë¡œì íŠ¸ UCC ì˜ìƒ ë³´ëŸ¬ê°€ê¸°](https://youtu.be/H0XNpBY4OPg)**

![image](https://user-images.githubusercontent.com/88833439/201501275-945ea0ec-a36d-4830-884c-67bd65d94c47.png)



## ğŸ‘­ ì†Œê°œ

### ì¶¤ì„ ì¢‹ì•„í•˜ì§€ë§Œ ëª¸ì´ ë”°ë¼ì£¼ì§€ ì•ŠëŠ” 'ëšë”±ì´'ë“¤ì„ ìœ„í•œ, ì¶¤ í”Œë«í¼ <CHUKKA\>

#### ì¶”ê¹Œ (CHUKKA) í”„ë¡œì íŠ¸ëŠ” 

#### ì¶¤ì„ ì‹¤ì‹œê°„/ê°•ì˜ë¡œ ë°°ìš¸ ìˆ˜ ìˆëŠ” ë°°ì›€ ì„œë¹„ìŠ¤,

#### ì¦ê¸°ë©´ì„œ ì¶¤ ì‹¤ë ¥ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê²Œì„ ì„œë¹„ìŠ¤,

#### ì§§ì€ ì¶¤ ì˜ìƒìœ¼ë¡œ ì‚¬ëŒë“¤ê³¼ ì†Œí†µí•  ìˆ˜ ìˆëŠ” ìˆí¼ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.



## ğŸ” CHUKKA ì„œë¹„ìŠ¤ í™”ë©´

### ê°•ì˜ í˜ì´ì§€

[ì €ì‘ê¶Œ ë³´í˜¸ë¥¼ ìœ„í•´ í…œí”Œë¦¿ ì´ë¯¸ì§€ëŠ” ì§ì ‘ ë§Œë“  ì´ë¯¸ì§€ë¡œ ëŒ€ì²´í–ˆìŠµë‹ˆë‹¤]

- **ê°•ì˜ ëª©ë¡**

  ![image](https://user-images.githubusercontent.com/88833439/201503564-f56b0d6d-dd1c-4c77-9f1c-30938e74458b.png)

- **ê°•ì˜ ìƒì„¸**

  ![image](https://user-images.githubusercontent.com/88833439/201503580-3e266501-6f37-463f-8319-2b2070ce5f6a.png)

- **ë¼ì´ë¸Œ ê°•ì˜** : WebRTC ê¸°ìˆ ì„ í†µí•´ì„œ ê°•ì‚¬ í™”ë©´ê³¼ ìì‹ ì˜ í™”ë©´ì„ ë¹„êµí•˜ë©° ì¶¤ì„ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ![image](https://user-images.githubusercontent.com/88833439/201503873-f99ef8a3-8e8a-40da-9efb-6c5b182d9624.png)

- **ë…¹í™” ê°•ì˜**: ë…¹í™” ê°•ì˜ë¥¼ ë“¤ì„ ìˆ˜ ìˆê³ , ì‚¬ìš©ìì˜ ì¹´ë©”ë¼ë¥¼ on/off í•˜ë©° ì¶¤ì„ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ![image](https://user-images.githubusercontent.com/88833439/201503883-0dbaf1b7-0c97-4fc4-95be-327693c19bb5.png)

---

### ê²Œì„ í˜ì´ì§€

- **ì‹œì‘ í™”ë©´**

  ![image](https://user-images.githubusercontent.com/88833439/201503664-91f428d2-ea4f-4530-85fc-abd940692368.png)

- **ê²Œì„ í”Œë ˆì´**: ì¤‘ê°„ì˜ ì •ë‹µ ì˜ìƒê³¼ ì‚¬ìš©ìì˜ ë™ì‘ì„ ë¹„êµí•˜ì—¬, ì ìˆ˜ê°€ ì±…ì •ë©ë‹ˆë‹¤.

  ![image](https://user-images.githubusercontent.com/88833439/201503672-bc80c250-6aab-42ac-a843-8d666d2e1425.png)

---

### ìŠ¤ë‚µìŠ¤ í˜ì´ì§€

- **ìŠ¤ë‚µìŠ¤ ëª©ë¡**: ë‹¤ë¥¸ íšŒì›ë“¤ì˜ ìŠ¤ë‚µìŠ¤ (ì§§ì€ ë™ì˜ìƒ) ë“¤ì„ ë³¼ ìˆ˜ ìˆìœ¼ë©°, ì¼ì£¼ì¼ ë™ì•ˆ ê°€ì¥ ë§ì´ ì—…ë¡œë“œ ëœ í•´ì‹œíƒœê·¸ë“¤ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ![image](https://user-images.githubusercontent.com/88833439/201503707-9d9b3db0-aaf0-40fb-ae1b-2c7d4f2a1b8a.png)

- **ìŠ¤ë‚µìŠ¤ ë“±ë¡**: ì›í•˜ëŠ” ë…¸ë˜ë¡œ ë°°ê²½ ìŒì•…ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì˜ìƒì„ ë…¹í™” ë° ì—…ë¡œë“œë¥¼ í•  ìˆ˜ ìˆê³ , ë¯¸ë¦¬ ë…¹í™”ëœ ì˜ìƒì„ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ![image](https://user-images.githubusercontent.com/88833439/201503748-3921a940-0365-44e7-a9f4-ad433eb81ce6.png)

---

### ë§ˆì´í˜ì´ì§€

- ìì‹ ì˜ í”„ë¡œí•„ì„ ë³¼ ìˆ˜ ìˆìœ¼ë©°, ê°•ì˜/ê²Œì„/ìŠ¤ë‚µìŠ¤ë¥¼ í†µí•´ ì–»ì€ ê²½í—˜ì¹˜ë¥¼ ë§¤ë‹¬ì˜ í˜•íƒœë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.![image](https://user-images.githubusercontent.com/88833439/201503773-f363e215-326b-483c-bde7-562f2a92f21c.png)

### ê´€ë¦¬ìí˜ì´ì§€

- íšŒì› ê´€ë¦¬, ê°•ì‚¬ ê´€ë¦¬, ê°•ì˜ ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ![image](https://user-images.githubusercontent.com/88833439/201503788-8e4a7bae-5959-4868-88d2-a1e3d6aa7f02.png)

 ã€€

## âš™ï¸ ê°œë°œ í™˜ê²½

- **OS**

  - Windows 10

- **Front**

  - HTML5, CSS3, JavaScript(ES6)
  - Node.js 16.16.0
  - React 17.0.2

- **Back**

  - Spring Boot 2.7.2
  - Spring Framework 5.3.22
  - Python 3.7
  - FastAPI 0.79
  - jdk 1.8

- **DB**

  - MySQL 8.0.29

- **WebRTc**

  - openVidu

- **IDE**

  - vscode 1.70
  - IntelliJ 2022.1.3

- ##### CI/CD

  - Amazon EC2 - Ubuntu 20.04
  - Nginx - 1.18.0

- **í˜‘ì—…ë„êµ¬**

  - Git, Jira, Notion

ã€€

## ğŸ§© ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜

![image](https://user-images.githubusercontent.com/88833439/201501549-9a01852f-bd47-406e-9172-8b8a3f243e39.png)

ã€€

## ğŸŒˆ ê¸°ìˆ  íŠ¹ì´ì 

- ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ë° tensorFlowë¥¼ ì´ìš©í•œ ìì„¸ ìœ ì‚¬ë„ ê³„ì‚° ì˜¤í”ˆì†ŒìŠ¤ë¥¼ í™œìš©í•œ ê²Œì„ ì„œë¹„ìŠ¤ ì œì‘
- ì‹¤ì‹œê°„ ë™ì‘ ì¸¡ì •ì„ ìœ„í•œ ì›¹ì†Œì¼“ í†µì‹  & ì •í™•ë„ ê°œì„ ì„ ìœ„í•œ ì˜ìƒì˜ FPS ì „ì²˜ë¦¬ ë° ì›¹ì†Œì¼“ ë™ê¸°í™”
- WebRTCë¥¼ ì´ìš©í•œ ì‹¤ì‹œê°„ ê°•ì˜ ì„œë¹„ìŠ¤

ã€€

# ğŸ“„ Manual

### 1. ê¹ƒ í´ë¡ 

<aside>
ğŸ’¡ gitì— ìˆëŠ” í”„ë¡œì íŠ¸ì˜ source codeë¥¼ í´ë¡ ë°›ìŠµë‹ˆë‹¤
</aside>


```bash
# git clone
$ git clone https://github.com/hula-la/chukka.git
$ cd chukka
```

### 2. ì„¤ì¹˜

<aside>
ğŸ’¡ í”„ë¡œì íŠ¸ ì‹¤í–‰ì„ ìœ„í•´ ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.
</aside>


1. **Node.js 16.16.0**

2. **jdk 1.8**

3.  **Python 3.7**

   

### 3. ë°±ì—”ë“œ ë¹Œë“œ

```bash
# 1. ë””ë ‰í† ë¦¬ ì´ë™
$ cd backend-java/
# 2. ì•„ë˜ì˜ application-hide.yml ì–‘ì‹ ì°¸ê³ í•´ì„œ ì¶”ê°€
# 3. ë¹Œë“œ
$ ./gradlew build
$ java -jar build/libs/ssafy-web-project-1.0-SNAPSHOT.jar
```

- src/resources ì— `application-hide.yml` ìƒì„± (`**`ì¸ ë¶€ë¶„ ì±„ì›Œì„œ)

```yml
spring:
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB
  mail:
    host: smtp.naver.com
    port: 465
    username: **********
    password: ****
    properties:
      mail.smtp.auth: true
      mail.smtp.ssl.enable: true
      mail.smtp.ssl.trust: smtp.naver.com
  jpa:
    hibernate:
      naming:
        implicit-strategy: org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy
        physical-strategy: org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL57Dialect
        format_sql: true
    show-sql: false
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      password: ******
      username: ******
    url: jdbc:mysql://localhost:3306/***?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Seoul&zeroDateTimeBehavior=convertToNull&rewriteBatchedStatements=true
  data:
    web:
      pageable:
        one-indexed-parameters: 'true'
  mvc:
    throw-exception-if-no-handler-found: 'true'
  devtools:
    livereload:
      enabled: 'true'
  resources:
    static-locations: classpath:/dist/
    add-mappings: 'false'
cloud:
  aws:
    s3:
      bucket: *****
    stack:
      auto: false
    region:
      static: ap-northeast-2
    credentials:
      access-key: ********
      secret-key: ************
      instanceProfile: true
```



### 4. í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ

ğŸ’¡ ë‹¤ìš´ë°›ì€ source code ë¡œ build í´ë”ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```bash
# 1. ë””ë ‰í† ë¦¬ ì´ë™
$ cd frontend/

# 2. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
$ npm i

# 3. ì•„ë˜ì˜ .env íŒŒì¼ ì–‘ì‹ ì°¸ê³ í•´ì„œ ì¶”ê°€
# 4. ì‹¤í–‰
$ npm build
```

- /frontend/ í•˜ìœ„ì— **`.env`** íŒŒì¼ ìƒì„±

  ```bash
  # .env
  REACT_APP_S3_URL_DANCE = 'https://***.s3.ap-northeast-2.amazonaws.com'
  REACT_APP_S3_URL_CHUKKA = 'https://***.s3.ap-northeast-2.amazonaws.com'
  ```



### 5. FastAPI ë¹Œë“œ

- ê°€ìƒ í™˜ê²½ ìƒì„± & í™œì„±í™”

```bash
# venv ë¼ëŠ” ì´ë¦„ì˜ ê°€ìƒí™˜ê²½ ìƒì„±
$ python -m venv venv

# ê°€ìƒí™˜ê²½ í™œì„±í™”
$ source venv/Scripts/activate
```

- fastAPI ì‹¤í–‰ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

```bash
$ cd backend-fastAPI/

# FastAPI
$ pip install fastapi uvicorn

# gunicorn: ë©€í‹° ìŠ¤ë ˆë“œ (ë‹¤ìˆ˜ì˜ ì‚¬ìš©ìê°€ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ì„œë²„ì—ì„œ ì‚¬ìš©)
$ pip install gunicorn # ë¡œì»¬ì—ì„  ì„¤ì¹˜ ë¶ˆí•„ìš”
```



- ëª¨ì…˜ì¸ì‹ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ë° í™˜ê²½ êµ¬ì¶•

```bash
# í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
$ pip install -r requirements.txt

# ìœ„ ëª…ë ¹ìœ¼ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•´ë„ ëª¨ë“ˆ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´
$ pip install swig
$ pip install pandas
$ pip install tf-slim
$ pip install sklearn
$ pip install request
$ pip install opencv-python
$ pip install tensorflow
$ pip install tqdm
$ pip install scipy
$ pip install psutil
$ pip install pycocotools

# swig ì„¤ì •
$ cd tf_pose/pafprocess
$ swig -python -c++ pafprocess.i && python setup.py build_ext --inplace 

# tf_slim ì„¤ì¹˜
$ cd ../../
$ git clone https://github.com/google-research/tf-slim.git

# tensorflow ê·¸ë˜í”„ íŒŒì¼ ë‹¤ìš´
$ cd models/graph/cmu
$ bash download.sh
$ cd ../../..
```

- ì‹¤í–‰

```bash
$ uvicorn prac2_main:app --reload
```

